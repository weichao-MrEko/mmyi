(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods"],{"33e3":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},s=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s})},"8a9b":function(t,e,a){"use strict";var o=a("9579"),s=a.n(o);s.a},9579:function(t,e,a){},e072:function(t,e,a){"use strict";a.r(e);var o=a("ee38"),s=a.n(o);for(var n in o)"default"!==n&&function(t){a.d(e,t,function(){return o[t]})}(n);e["default"]=s.a},e2b8:function(t,e,a){"use strict";a.r(e);var o=a("33e3"),s=a("e072");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("8a9b");var i=a("2877"),c=Object(i["a"])(s["default"],o["a"],o["b"],!1,null,null,null);e["default"]=c.exports},ee38:function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){return a.e("components/uni-steps/uni-steps").then(a.bind(null,"ebc0"))},n={components:{uniSteps:s},data:function(){return{beforeHeaderzIndex:11,afterHeaderzIndex:10,beforeHeaderOpacity:1,afterHeaderOpacity:0,showBack:!0,swiperList:[],currentSwiper:0,anchorlist:[],selectAnchor:0,serviceClass:"",specClass:"",shareClass:"",goodsData:"",selectSpec:null,isKeep:!1,descriptionStr:"",list1:[{title:"发布需求"},{title:"客户投标"},{title:"店铺选标"},{title:"沟通中"},{title:"结束"}],active:0,offer:[],user_type:null,showStatus:!0}},onLoad:function(e){var a=this;console.log(t(e," at pages\\goods\\goods.vue:283")),e.good_id?this.$http("/newtasks/taskindex",{id:37}).then(function(t){for(var e=0;e<t.data.data.attatchment.length;e++)t.data.data.attatchment[e].url=t.data.data.attatchment[e].url.replace(/\\/g,"/");a.swiperList=t.data.data.attatchment,a.descriptionStr=JSON.parse(t.data.data.detail.desc),a.goodsData=t.data.data.detail,a.offer=t.data.data.works.data,a.user_type=t.data.data.user_type;var o=(new Date).getTime(),s=new Date(t.data.data.detail.begin_at).getTime(),n=new Date(t.data.data.detail.delivery_deadline).getTime();o>s&&(a.active=1,o>n&&(a.active=2))}):this.$http("/api/shop/goodContent",{id:e.good_id}).then(function(t){a.showStatus=!1})},onReady:function(){this.calcAnchor()},onPageScroll:function(t){this.selectAnchor=t.scrollTop>=this.anchorlist[2].top?2:t.scrollTop>=this.anchorlist[1].top?1:0;var e=375;t.scrollTop=t.scrollTop>e?375:t.scrollTop,this.afterHeaderOpacity=t.scrollTop*(1/e),this.beforeHeaderOpacity=1-this.afterHeaderOpacity,this.beforeHeaderzIndex=t.scrollTop>0?10:11,this.afterHeaderzIndex=t.scrollTop>0?11:10},onReachBottom:function(){o.showToast({title:"触发上拉加载"})},mounted:function(){},methods:{swiperChange:function(t){this.currentSwiper=t.detail.current},toMsg:function(){o.navigateTo({url:"../msg/msg"})},copy:function(){o.setClipboardData({data:this.goodsData.email,success:function(){o.showToast({title:"复制成功",icon:"none"})}})},callPhone:function(){o.makePhoneCall({phoneNumber:this.goodsData.phone})},toChat:function(){o.navigateTo({url:"../msg/chat/chat?name=客服008"})},share:function(){this.shareClass="show"},hideShare:function(){var t=this;this.shareClass="hide",setTimeout(function(){t.shareClass="none"},150)},keep:function(){this.isKeep=!this.isKeep,this.isKeep?this.$http("/api/user/addFocus",{task_id:""},"get").then(function(t){}):this.$http("/api/user/deleteFocus",{id:""}).then(function(t){})},joinCart:function(){if(null==this.selectSpec)return this.showSpec(function(){o.showToast({title:"已加入购物车"})});o.showToast({title:"已加入购物车"})},buy:function(){o.navigateTo({url:"../order/bidding?id="+this.goodsData.id+"&price="+this.goodsData.bounty})},toRatings:function(){o.navigateTo({url:"ratings/ratings?task_id="+this.goodsData.id})},toConfirmation:function(){var t=[],e={id:this.goodsData.id,img:"../../static/img/goods/p1.jpg",name:this.goodsData.name,spec:"规格:"+this.goodsData.spec[this.selectSpec],price:this.goodsData.price,number:this.goodsData.number};t.push(e),o.setStorage({key:"buylist",data:t,success:function(){o.navigateTo({url:"../order/bidding"})}})},showComments:function(t){},setSelectSpec:function(t){this.selectSpec=t},sub:function(){this.goodsData.number<=1||this.goodsData.number--},add:function(){this.goodsData.number++},toAnchor:function(t){this.selectAnchor=t,o.pageScrollTo({scrollTop:this.anchorlist[t].top,duration:200})},calcAnchor:function(){var t=this;this.anchorlist=[{name:"主图",top:0},{name:"详情",top:0},{name:"评价",top:0}];var e=o.createSelectorQuery().select("#comments");e.boundingClientRect(function(e){var a=0;a=plus.navigator.getStatusbarHeight();var s=o.upx2px(100);t.anchorlist[1].top=e.top-s-a,t.anchorlist[2].top=e.bottom-s-a}).exec()},back:function(){o.navigateBack()},showService:function(){console.log(t("show"," at pages\\goods\\goods.vue:489")),this.serviceClass="show"},hideService:function(){var t=this;this.serviceClass="hide",setTimeout(function(){t.serviceClass="none"},200)},showSpec:function(e){console.log(t("show"," at pages\\goods\\goods.vue:501")),this.specClass="show",this.specCallback=e},specCallback:function(){},hideSpec:function(){var t=this;this.specClass="hide",this.selectSpec&&this.specCallback&&this.specCallback(),this.specCallback=!1,setTimeout(function(){t.specClass="none"},200)},discard:function(){}}};e.default=n}).call(this,a("0de9")["default"],a("6e42")["default"])}},[["1a8c","common/runtime","common/vendor"]]]);